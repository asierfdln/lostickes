{% extends "applostickes/base.html" %}
{% block content %}
<div class="col">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'group' groupName=debt.0 group_identifier=debt.1 %}">{{ debt.0 }}</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">{{ debt.2 }}</li>
    </ol>
  </nav>
</div>

<div class="col">
  {% if debt.5 > 0 %}
  <article class="media content-section col-md-12" style="background-color: #f8d7da">
  {% elif debt.5 == 0 %}
  <article class="media content-section col-md-12">
  {% else %}
  <article class="media content-section col-md-12" style="background-color: #d4edda;">
  {% endif %}
    <div class="media-body">
      <div class="article-metadata border-bottom border-dark">
        <div class="row">
          <div class="col border-right border-dark">
            <h4>{{ debt.2 }}</h4>
          </div>
          <div class="col">
            <small class="text-muted">{{ debt.3 }}</small>
          </div>
        </div>
      </div>
      <div class="article-metadata border-bottom border-dark">
        <div class="row">
          <div class="col">
            {% if debt.4 > 0 %}
            <p class="text-muted">Coste: {{ debt.4 }} €</p>
            {% elif debt.4 == 0 %}
            <p class="text-muted">Coste: 0.0 €</p><!-- por eso de que python no pilla decimales de 0 -->
            {% else %}
            <p class="text-muted">Coste: {{ debt.4 }} €</p>
            {% endif %}
          </div>
        </div>
      </div>
      <div class="article-metadata border-bottom border-dark">
        <div class="row">
          <div class="col">
            {% if debt.5 > 0 %}
            <p class="text-muted">Balance (debes): {{ debt.5 }} €</p>
            {% elif debt.5 == 0 %}
            <p class="text-muted">Balance: 0.0 €</p><!-- por eso de que python no pilla decimales de 0 -->
            {% else %}
            <p class="text-muted">Balance (te deben): {{ debt.5 }} €</p>
            {% endif %}
          </div>
        </div>
      </div>
      <div class="article-metadata border-bottom border-dark">
        <div class="row">
          {% for user_name in debt.6 %}
          {% if forloop.last %}
          <div class="col">
            <p class="text-muted">{{ user_name }}</p>
          </div>
          {% else %}
          <div class="col border-right border-dark">
            <p class="text-muted">{{ user_name }}</p>
          </div>
          {% endif %}
          {% endfor %}
        </div>
      </div>
      {% for element in debt.7 %}
      <div class="row">
        <div class="col">
          <p class="text-muted">{{ element.0 }}</p>
        </div>
        <div class="col col-md-9 text-center">
          {% for responsible in element.1 %}
          {% if forloop.last %}
          <span class="text-muted" name="val">{{ responsible }}</span>
          {% else %}
          <span class="text-muted" name="val">{{ responsible }}, </span>
          {% endif %}
          {% endfor %}
        </div>
        <div class="col">
          <p style="float: right;" class="text-muted">{{ element.2 }} €</p>
        </div>
      </div>
      {% endfor %}
    </div>
  </article>
</div>
<script type="text/javascript">
  var s = document.getElementsByName("val");
  for (var i = 0; i < s.length; i++) {
    var f = s[i].innerText;
    if (f.includes("OWNER")) {
      s[i].style.color = "#7D7D7D";
    }
    else if (f.includes("OWS")) {
      s[i].style.color = "red";
    }
    else
      s[i].style.color = "green";
  }
</script>
{% endblock %}
{% block side %}
<div id="sidebar" class="col-md-4">
  <div class="content-section">
    <h3>Options</h3>
    <p class='text-muted'>
    <ul class="list-group">
      <li class="list-group-item list-group-item-light"><a class="article-title" href="{% url 'user' %}">Home</a></li>
      <li class="list-group-item list-group-item-light"><a class="article-title" href="{% url 'groups' %}">Groups</a>
      </li>
      <li class="list-group-item list-group-item-light"><a class="article-title" href="{% url 'debts' %}">Debts</a></li>
      <li class="list-group-item list-group-item-light"><a class="article-title" href="{% url 'createGroup' %}">Create
          group</a></li>
    </ul>
    </p>
  </div>
  {% if debt.5 != 0 %}
  <a role="button" class="btn btn-outline-info btn-block" href="{% url 'pay_debt' debt_identifier=debt.9 %}">
    {% if debt.8 == 0 %}
    Pay debt
    {% else %}
    Debt settled
    {% endif %}
  </a>
  {% endif %}
</div>
{% endblock side %}